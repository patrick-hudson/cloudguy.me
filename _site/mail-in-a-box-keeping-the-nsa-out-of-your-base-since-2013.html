<!DOCTYPE HTML>
<!--
	Strata by HTML5 UP
	html5up.net | @n33co
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
  <head>
    <title>Mail In a Box: Keeping the NSA out of your base since 2013 - I'm in a Cloud!</title>
<meta charset="utf-8" />
<meta name="description" content="Since before it was widely known that the internet wasn't as secure as we hoped, I've been one to run applications in my own environment instead of taking advantage of the commercialized products easily available. Sometimes it's simply for the sheer amount of control, and others it's because I don't want my Drunk Spending on Amazon to be tied to my email accounts. It's not always the best thing that Google and Amazon can now predict the exact days and times I'll be most inebriated and offer me 'Great deals'" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<!--[if lte IE 8]><script src="/assets/js/ie/html5shiv.js"></script><![endif]-->
<link rel="stylesheet" href="/assets/css/main.css" />
<!--[if lte IE 8]><link rel="stylesheet" href="/assets/css/ie8.css" /><![endif]-->
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="Sitewide ATOM Feed" />
<link rel="alternate" type="application/rss+xml" href="/rss.xml" title="Sitewide RSS Feed" />
<link rel="author" type="text/plain" href="/humans.txt" />

    <!-- Open Graph -->
<meta property="og:type" content="article" />
<meta property="og:title" content="Mail In a Box: Keeping the NSA out of your base since 2013" />
<meta property="og:description" content="Since before it was widely known that the internet wasn't as secure as we hoped, I've been one to run applications in my own environment instead of taking advantage of the commercialized products easily available. Sometimes it's simply for the sheer amount of control, and others it's because I don't want my Drunk Spending on Amazon to be tied to my email accounts. It's not always the best thing that Google and Amazon can now predict the exact days and times I'll be most inebriated and offer me 'Great deals'" />
<meta property="og:site_name" content="I'm in a Cloud!" />
<meta property="og:url" content="/mail-in-a-box-keeping-the-nsa-out-of-your-base-since-2013" />


    

  </head>
	<body id="top">

		<!-- Header -->
  <header id="header">
    <a href="/" class="image avatar"><img src="https://avatars0.githubusercontent.com/u/5728403?v=3&s=460" alt="" /></a>
    <h1><strong>I am Patrick</strong>, I’m a guy who always manages to find himself neck deep in the Cloud, and someone who likes to break it.  I also tend to get drunk sometimes.
</h1>
  </header>


		<!-- Main -->
		<div id="main">
      <article>
        <header class="major">
          <h2>Mail In a Box: Keeping the NSA out of your base since 2013</h2>
          <p>
            <span class="hint--bottom" aria-label="Posted On">
              <i class="fa fa-calendar"></i> 
            </span>
              24 August 2015
             on
            <span class="hint--bottom" aria-label="Categories">
              <i class="fa fa-tags"></i> 
            </span>
              OpenSource, Cloud, Self-Hosted, Email, and Linux.
            
            <span class="hint--bottom" aria-label="Estimated time to complete">
              <i class="fa fa-clock-o"></i> 
            </span>
            45 minutes
            <span class="hint--bottom" aria-label="Difficulty">
              <i class="fa fa-info-circle" aria-hidden="true"></i>
            </span> 
            Intermediate
          </p>
        </header>

        <section>
          <p>Since before it was widely known that the internet wasn’t as secure as we hoped, I’ve been one to run applications in my own environment instead of taking advantage of the commercialized products easily available. Sometimes it’s simply for the sheer amount of control, and others it’s because I don’t want my Drunk Spending on Amazon to be tied to my email accounts. It’s not always the best thing that Google and Amazon can now predict the exact days and times I’ll be most inebriated and offer me “Great deals”</p>

<p>That’s where we’re gonna start today! Lets take back our privacy one service at a time, and today’s service is E-Mail. There are quite a few turn-key applications in a box that will create  fully functioning mail server that includes both sending and receiving connectors and a full fledged webmail client. The one I’ve come to know, and use is <a href="https://mailinabox.email/">Mail-in-a-Box</a>. That’s not the only option out there, another quite popular turn-key systems is <a href="http://www.iredmail.org/index.html">iRedMail</a>.</p>

<p>The cons of running your own mail server can be quite daunting especially if managing a machine that could be so vital to our personal and professional lives. Don’t take that as a reason not to do it, but things you’ll want to be aware of before undertaking something like this.</p>

<blockquote>
  <ul>
    <li>Having an email account get compromised is a real issue that I personally see daily in this industry. If that ends up happening to you, you’re IP address will be placed on a Spam Black list and you won’t be able to send out email until it’s cleaned up</li>
    <li>The nature of the server market today is full our Cloud Providers. These companies have built their entire business on a use and throw away method. The server you spun up today, may have been someones spam bed yesterday</li>
    <li>If your email goes down at 1am the morning before a project is due, are you willing to fix it?</li>
  </ul>
</blockquote>

<p>Those are the big points. MIAB has their own check list</p>

<h3 id="pre-flight-checklist">Pre-flight Checklist</h3>

<blockquote>
  <ul>
    <li>Can I run my Mail-in-a-Box at home?</li>
    <li>No. Computers on most residential networks are blocked from sending mail both on the sending end (e.g. your ISP blocking port 25) and on the receiving end (by blacklists) because residential computers are all too often hijacked to send spam. Your home IP address is also probably dynamic and lacks configurable “reverse DNS.” If any of these apply to you, you’ll need to use a virtual machine in the cloud.</li>
    <li>What will it cost?</li>
    <li>This is going to cost you about $16 per month. Most of the cost is in having a (virtual) machine connected to the Internet 24/7. You can divide this among friends and share your Mail-in-a-Box if you’d like to split it up.</li>
    <li>Do I have time?</li>
    <li>There’s also your time. Once a Mail-in-a-Box is set up, we hope it “just works” but when you are your own system administrator you must be prepared to resolve issues as they arise.</li>
    <li>How will this affect my website? (Advanced.)</li>
    <li>If your website is just HTML pages and static files, you can copy it onto your Mail-in-a-Box for a really simple hosting solution. If you have a website already, be aware that your Mail-in-a-Box wants to take over your DNS so that it can configure it correctly for email, and we recommend you let the box do that, but you can configure the DNS to keep your website on another machine. You may also need to configure relaying for outbound transactional email.</li>
    <li>Can I modify my box after / use my box for something else too? (Advanced.)</li>
    <li>No. Mail-in-a-Box must be installed on a fresh machine that will be dedicated to Mail-in-a-Box, and you cannot modify the box after installation (configuration changes will get overwritten by the box’s self-management). If you are looking for something more advanced, try iRedMail, Sovereign, or Modoboa.</li>
  </ul>
</blockquote>

<p>If you are still with me, and ready to do this then lets dig in!</p>

<p>First, we need to find a server. That in and of itself is a not something to take lightly when dealing with a mail server that needs to have a clean IP address range. No company is giving  me money to tell you that they are awesome. So, this part I’ll leave up to you. Start Googling “Quality providers for an email server”</p>

<p>An important thing to note, you need a <strong>fresh</strong> server. It needs to be 100% empty beyond the base Ubuntu 14.04 OS.</p>

<h2 id="installation">Installation</h2>

<p>I’m not even going to try and re-create the beautiful <a href="https://mailinabox.email/guide.html">documentation</a> they’ve created. So I’ll point you over there, and capture a few key points as the install goes.</p>

<p>Installation starts with 1 line</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">curl -s https://mailinabox.email/bootstrap.sh | sudo bash</code></pre></figure>

<p>That’s it, now we go through each prompt.</p>

<p>You’ll be asked a series of questions that are rather self explanitory. What would your like your new email to me? What would you like to call the server? What country should you use for the SSL Certificate?</p>

<p>It’ll spit out a few diagnostic information pieces</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">Primary Hostname: box.drunksysadmin.com
Public IP Address: xx.xx.xx.xx
Private IP Address: 172.xx.xx.xx
Mail-in-a-Box Version:  v0.13a</code></pre></figure>

<p>Then it will do more installation steps (again, I highly recommend following Mail-in-a-box’s documentation for pictures!)</p>

<p>Once it’s all done, you’ll get something that looks like this</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">Your Mail-in-a-Box is running.

Please log <span class="k">in </span>to the control panel <span class="k">for </span>further instructions at:

    https://xx.xx.xx.xx/admin

You will be alerted that the website has an invalid certificate. Check that
the certificate fingerprint matches:

C0:9B:FF:04:2B:2D:8F:47:5A:8B:D5:88:B7:05:D3:4B:6C:22:80:5F</code></pre></figure>

<p>Boom! Login and start configuring.</p>

<h3 id="final-words">Final Words</h3>

<p>Is this something I’d recommend doing for someone who has minimal Linux Experience? Yes and No. Setting Mail-in-a-box up is not for the faint of heart, but my recommendation would be to head over to <a href="http://www.namecheap.com">Namecheap</a> and setup a domain. Use that domain to install your mail server. Once you are comfortable enough with the setup, you can then move your primary domain over.</p>

<p>It’s a great learning experience for anyone who really wants to dive into Linux, or someone who just wants to keep the NSA’s hands out of your email!</p>

        </section>
      </article>

      


      
      <hr />
      <div class="row">
        <article class="6u 12u$(xsmall) work-item">
          
          <p>Previous</p>
  				<h3><a href="/gogs-a-self-hosted-github-alternative-on-a-diet">Gogs: A self hosted GitHub alternative on a diet</a></h3>
  				<p>What's better than hosting your own private GUI for Git so we can keep all of our potentially world ending code from the NSA? Alright, I'll move the tin foil hat the the side for another day. However, when that front end is only consuming 88mb of RAM and the closest competition (cough, cough, GitLab) eats an entire gigabyte before it even finishes starting you know we may have a winner.</p>
          
  			</article>
  			<article class="6u$ 12u$(xsmall) work-item">
          
  			</article>
      </div>
      

		</div>

    <!-- Footer -->
  <footer id="footer">
    <ul class="icons">
      
      
      
      <li><a href="https://linkedin.com/in/hudsonpatrick" class="icon fa-linkedin"><span class="label">Linkedin</span></a></li>
      
      
      
      
      
      <li><a href="https://github.com/patrick-hudson" class="icon fa-github"><span class="label">Github</span></a></li>
      
      
      <li><a href="mailto:phudson2@gmail.com" class="icon fa-envelope-o"><span class="label">Email</span></a></li>
      
      
      <li><a href="/rss.xml" class="icon fa-rss"><span class="label">Feed</span></a></li>
      
    </ul>
    <ul class="copyright">
      <li>&copy; Patrick Hudson</li><li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
    </ul>
  </footer>

    <!-- Scripts -->
  <script src="/assets/js/jquery.min.js"></script>
  <script src="/assets/js/jquery.poptrox.min.js"></script>
  <script src="/assets/js/skel.min.js"></script>
  <script src="/assets/js/util.js"></script>
  <!--[if lte IE 8]><script src="/assets/js/ie/respond.min.js"></script><![endif]-->
  <script src="/assets/js/main.js"></script>


	</body>
</html>
