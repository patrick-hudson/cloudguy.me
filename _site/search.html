<!DOCTYPE HTML>
<!--
	Strata by HTML5 UP
	html5up.net | @n33co
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
  <head>
    <title>I'm in a Cloud!</title>
<meta charset="utf-8" />
<meta name="description" content="I am Patrick, I’m a guy who always manages to find himself neck deep in the Cloud, and someone who likes to break it.  I also tend to get drunk sometimes.
" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<!--[if lte IE 8]><script src="/assets/js/ie/html5shiv.js"></script><![endif]-->
<link rel="stylesheet" href="/assets/css/main.css" />
<!--[if lte IE 8]><link rel="stylesheet" href="/assets/css/ie8.css" /><![endif]-->
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="Sitewide ATOM Feed" />
<link rel="alternate" type="application/rss+xml" href="/rss.xml" title="Sitewide RSS Feed" />
<link rel="author" type="text/plain" href="/humans.txt" />

    <!-- Open Graph -->
<meta property="og:type" content="article" />
<meta property="og:title" content="I'm in a Cloud!" />
<meta property="og:description" content="I am Patrick, I’m a guy who always manages to find himself neck deep in the Cloud, and someone who likes to break it.  I also tend to get drunk sometimes.
" />
<meta property="og:site_name" content="I'm in a Cloud!" />
<meta property="og:url" content="/search" />


    

  </head>
	<body id="top">

		<!-- Header -->
  <header id="header">
    <a href="/" class="image avatar"><img src="https://avatars0.githubusercontent.com/u/5728403?v=3&s=460" alt="" /></a>
    <h1><strong>I am Patrick</strong>, I’m a guy who always manages to find himself neck deep in the Cloud, and someone who likes to break it.  I also tend to get drunk sometimes.
</h1>
  </header>


		<!-- Main -->
			<div id="main">
				<div class="search">
    <form action="/search.html" method="get">
  <label for="search-box">Search</label>
  <input type="text" id="search-box" name="query">
  <input type="submit" value="search">
</form>

<ul id="search-results"></ul>

<script>
  window.store = {
    
      "linux-email-mail-in-a-box-keeping-the-nsa-out-of-your-base-since-2013": {
        "title": "Mail In a Box: Keeping the NSA out of your base since 2013",
        "author": "",
        "category": "",
        "content": "Since before it was widely known that the internet wasn’t as secure as we hoped, I’ve been one to run applications in my own environment instead of taking advantage of the commercialized products easily available. Sometimes it’s simply for the sheer amount of control, and others it’s because I don’t want my Drunk Spending on Amazon to be tied to my email accounts. It’s not always the best thing that Google and Amazon can now predict the exact days and times I’ll be most inebriated and offer me “Great deals”That’s where we’re gonna start today! Lets take back our privacy one service at a time, and today’s service is E-Mail. There are quite a few turn-key applications in a box that will create  fully functioning mail server that includes both sending and receiving connectors and a full fledged webmail client. The one I’ve come to know, and use is Mail-in-a-Box. That’s not the only option out there, another quite popular turn-key systems is iRedMail.The cons of running your own mail server can be quite daunting especially if managing a machine that could be so vital to our personal and professional lives. Don’t take that as a reason not to do it, but things you’ll want to be aware of before undertaking something like this.      Having an email account get compromised is a real issue that I personally see daily in this industry. If that ends up happening to you, you’re IP address will be placed on a Spam Black list and you won’t be able to send out email until it’s cleaned up    The nature of the server market today is full our Cloud Providers. These companies have built their entire business on a use and throw away method. The server you spun up today, may have been someones spam bed yesterday    If your email goes down at 1am the morning before a project is due, are you willing to fix it?  Those are the big points. MIAB has their own check listPre-flight Checklist      Can I run my Mail-in-a-Box at home?    No. Computers on most residential networks are blocked from sending mail both on the sending end (e.g. your ISP blocking port 25) and on the receiving end (by blacklists) because residential computers are all too often hijacked to send spam. Your home IP address is also probably dynamic and lacks configurable “reverse DNS.” If any of these apply to you, you’ll need to use a virtual machine in the cloud.    What will it cost?    This is going to cost you about $16 per month. Most of the cost is in having a (virtual) machine connected to the Internet 24/7. You can divide this among friends and share your Mail-in-a-Box if you’d like to split it up.    Do I have time?    There’s also your time. Once a Mail-in-a-Box is set up, we hope it “just works” but when you are your own system administrator you must be prepared to resolve issues as they arise.    How will this affect my website? (Advanced.)    If your website is just HTML pages and static files, you can copy it onto your Mail-in-a-Box for a really simple hosting solution. If you have a website already, be aware that your Mail-in-a-Box wants to take over your DNS so that it can configure it correctly for email, and we recommend you let the box do that, but you can configure the DNS to keep your website on another machine. You may also need to configure relaying for outbound transactional email.    Can I modify my box after / use my box for something else too? (Advanced.)    No. Mail-in-a-Box must be installed on a fresh machine that will be dedicated to Mail-in-a-Box, and you cannot modify the box after installation (configuration changes will get overwritten by the box’s self-management). If you are looking for something more advanced, try iRedMail, Sovereign, or Modoboa.  If you are still with me, and ready to do this then lets dig in!First, we need to find a server. That in and of itself is a not something to take lightly when dealing with a mail server that needs to have a clean IP address range. No company is giving  me money to tell you that they are awesome. So, this part I’ll leave up to you. Start Googling “Quality providers for an email server”An important thing to note, you need a fresh server. It needs to be 100% empty beyond the base Ubuntu 14.04 OS.InstallationI’m not even going to try and re-create the beautiful documentation they’ve created. So I’ll point you over there, and capture a few key points as the install goes.Installation starts with 1 linecurl -s https://mailinabox.email/bootstrap.sh | sudo bashThat’s it, now we go through each prompt.You’ll be asked a series of questions that are rather self explanitory. What would your like your new email to me? What would you like to call the server? What country should you use for the SSL Certificate?It’ll spit out a few diagnostic information piecesPrimary Hostname: box.drunksysadmin.comPublic IP Address: xx.xx.xx.xxPrivate IP Address: 172.xx.xx.xxMail-in-a-Box Version:  v0.13aThen it will do more installation steps (again, I highly recommend following Mail-in-a-box’s documentation for pictures!)Once it’s all done, you’ll get something that looks like thisYour Mail-in-a-Box is running.Please log in to the control panel for further instructions at:    https://xx.xx.xx.xx/adminYou will be alerted that the website has an invalid certificate. Check thatthe certificate fingerprint matches:C0:9B:FF:04:2B:2D:8F:47:5A:8B:D5:88:B7:05:D3:4B:6C:22:80:5FBoom! Login and start configuring.Final WordsIs this something I’d recommend doing for someone who has minimal Linux Experience? Yes and No. Setting Mail-in-a-box up is not for the faint of heart, but my recommendation would be to head over to Namecheap and setup a domain. Use that domain to install your mail server. Once you are comfortable enough with the setup, you can then move your primary domain over.It’s a great learning experience for anyone who really wants to dive into Linux, or someone who just wants to keep the NSA’s hands out of your email!",
        "url": "/linux/email/mail-in-a-box-keeping-the-nsa-out-of-your-base-since-2013"
      }
      ,
    
      "linux-git-gogs-a-self-hosted-github-alternative-on-a-diet": {
        "title": "Gogs: A self hosted GitHub alternative on a diet",
        "author": "",
        "category": "",
        "content": "In walks Gogs, a seriously streamlined platform for all of your revision control needs.Now, don’t get me wrong, GitLab, GitHub Enterprise and the Monopoly know as Atlassian have there own each established market sectors. You are not going to get every single feature of a multi thousand dollar licensed product. There are a few, almost hilariously missing pieces that makes Gogs unusable by any of not all team based development operations. Those two things are Pull Requests and any type of Code Review. However, as a single developer wanting a place to store my code that I’d never, ever want to see the light of day on GitHub. It’s a seriously great middle ground between Enterprise and Hobby.It also came to a surprise because for such an advanced looking product, they seem to have shown up over night. With just over 70 Pages of commits on GitHub starting in March of 2014, they have managed to create an amazing product that runs rather well, and has the added benefit of being written in GO. There is good news regarding the two blatant issues that prevent Gogs from becoming anything usable in this market, and thats Gitea. Disclaimer I have not extensively tested Gitea but it is at its core a fork of GogsAll your basic GitHub-esk functionality exists, you can create repos, both public and private, there’s an issue tracker for each repo and of course SSH based access for secure commits and pulls.Keep your eyes pealed for my post about getting it installed, but in all honesty it’s so simple to install that a dedicated post is over kill! Not to mention, if you use one of their Docker configs or VagrantFiles you’ll be up and running in a matter of seconds.# Pull image from Docker Hub.$ docker pull gogs/gogs# Create local directory for volume.$ mkdir -p /var/gogs# Use `docker run` for the first time.$ docker run --name=gogs -p 10022:22 -p 10080:3000 -v /var/gogs:/data gogs/gogs# Use `docker start` if you have stopped it.$ docker start gogs That’s it, 4 lines and you have your own GitHub. A more in-depth installation guide will be showing up soon, but for now you can head over to Gogs themselves and go thought their documentation",
        "url": "/linux/git/gogs-a-self-hosted-github-alternative-on-a-diet"
      }
      ,
    
      "linux-python-automated-amazon-ebs-snapshots": {
        "title": "Automated Amazon EBS Snapshots - Ubuntu 14.04 LTS",
        "author": "",
        "category": "",
        "content": "Wouldn’t it be cool if we could schedule EBS Snapshots with features like backup purging based on how old they are, or possibly target specific instances that are tagged?I ran across a great repository that’s aptly named “aws-missing-tools” that’s been created by Colin Johnson.It contains an insane amount of awesome stuff, but this post will detail one specific tool named ec2-automate-backup. We’re specifically going to use the the ec2-automate-backup-awscli.sh script and not the ec2-automate-backup.sh. The script we’re using utilizes the awscli python package where as the other script utilizes EC2 API Tools. ec2-automate-backup was created to provide easy backup/snapshot functionality for multiple EC2 EBS volumesOne thing to note, the server you run that script from does not have to be within the Amazon umbrella. It’ll work anywhere.  InstallationWe need two packages before getting started, Python 2.x or 3.x and Setup Toolssudo apt-get updateapt-get install python python-setuptoolsUse easy_install to install pipeasy_install pipFinally use pip to install awsclipip install awscli  ConfigurationRun the awscli configuration tool and fill in, your Access Key ID, your Secret Access Key, Default Region (us-east-1, us-west-1, us-west-2, etc) and finally output formataws configure  AWS Access Key ID [None]: 1234564789987654321  AWS Secret Access Key [None]: abcdefghijklmnop  Default region name [None]: us-west-2  Default output format [None]: jsonCreate a new user named backup-agent, and create the home directoryuseradd -m -d /home/backup-agent -s /bin/bash backup-agentDownload the ec2-automate-backup-awscli.sh scriptcurl -O https://raw.githubusercontent.com/colinbjohnson/aws-missing-tools/master/ec2-automate-backup/ec2-automate-backup-awscli.sh  Directions For UseExample of Useec2-automate-backup-awscli.sh -v vol-6d6a0527the above example would provide a single backup of the EBS volumeid vol-6d6a0527. The snapshot would be created with the description “vol-6d6a0527_2012-09-07”.Required Parametersec2-automate-backup-awscli.sh requires one of the following two parameters be provided:-v &lt;volumeid&gt; - the “volumeid” parameter is required to select EBS volumes for snapshot if ec2-automate-backup-awscli.sh is run using the “volumeid” selection method - the “volumeid” selection method is the default selection method.-t &lt;tag&gt; - the “tag” parameter is required if the “method” of selecting EBS volumes for snapshot is by tag (-s tag). The format for tag is key=value (example: Backup=true) and the correct method for running ec2-automate-backup-awscli.sh in this manner is ec2-automate-backup-awscli.sh -s tag -t Backup=true.#### Optional Parameters-r &lt;region&gt; - the region that contains the EBS volumes for which you wish to have a snapshot created.-s &lt;selection_method&gt; - the selection method by which EBS volumes will be selected. Currently supported selection methods are “volumeid” and “tag.” The selection method “volumeid” identifies EBS volumes for which a snapshot should be taken by volume id whereas the selection method “tag” identifies EBS volumes for which a snapshot should be taken by a key=value format tag.-c &lt;cron_primer_file&gt; - running with the -c option and a providing a file will cause ec2-automate-backup-awscli.sh-awscli.sh to source a file for environmental configuration - ideal for running ec2-automate-backup-awscli.sh-awscli.sh under cron. An example cron primer file is located in the “Resources” directory and is called cron-primer.sh.-n - tag snapshots “Name” tag as well as description-h - tag snapshots “InitiatingHost” tag to specify which host ran the script-k &lt;purge_after_days&gt; - the period after which a snapshot can be purged. For example, running “ec2-automate-backup-awscli.sh-awscli.sh -v “vol-6d6a0527 vol-636a0112” -k 31” would allow snapshots to be removed after 31 days. purge_after_days creates two tags for each volume that was backed up - a PurgeAllow tag which is set to PurgeAllow=true and a PurgeAfter tag which is set to the present day (in UTC) + the value provided by -k.-p - the -p flag will purge (meaning delete) all snapshots that were created more than “purge after days” ago. ec2-automate-backup-awscli.sh looks at two tags to determine which snapshots should be deleted - the PurgeAllow and PurgeAfter tags. The tags must be set as follows: PurgeAllow=true and PurgeAfter=YYYY-MM-DD where YYYY-MM-DD must be before the present date.  Potential Uses and Methods of UseTo backup multiple EBS volumes use ec2-automate-backup-awscli.sh as follows:ec2-automate-backup-awscli.sh -v \"vol-6d6a0527 vol-636a0112\"To backup a selected group of EBS volumes on a daily schedule tag each volume you wish to backup with the tag “Backup=true” and run ec2-automate-backup-awscli.sh using cron as follows:0 0 * * * ec2-automate-backup-awscli.sh -s tag -t \"Backup=true\"To backup a selected group of EBS volumes on a daily and/or monthly schedule tag each volume you wish to backup with the tag “Backup-Daily=true” and/or “Backup-Monthly=true” and run ec2-automate-backup-awscli.sh using cron as follows:0 0 * * * backup-agent /home/backup-agent/ec2-automate-backup-awscli.sh -s tag -t \"Backup-Daily=true\"0 0 1 * * backup-agent /home/backup-agent/ec2-automate-backup-awscli.sh -s tag -t \"Backup-Monthly=true\"To perform daily backup using cron and to load environment configuration with a “cron-primer” file:0 0 * * * backup-agent /home/backup-agent/ec2-automate-backup-awscli.sh -c /home/backup-agent/cron-primer.sh -s tag -t \"Backup=True\"-u - the -u flag will tag snapshots with additional data so that snapshots can be more easily located. Currently the two user tags created are Volume=”ebs_volume” and Created=”date.” These can be easily modified in code.",
        "url": "/linux/python/automated-amazon-ebs-snapshots"
      }
      
    
  };
</script>
<script src="/assets/js/lunr.min.js"></script>
<script src="/assets/js/search.js"></script>

</div>
			</div>

      <!-- Footer -->
  <footer id="footer">
    <ul class="icons">
      
      
      
      <li><a href="https://linkedin.com/in/hudsonpatrick" class="icon fa-linkedin"><span class="label">Linkedin</span></a></li>
      
      
      
      
      
      <li><a href="https://github.com/patrick-hudson" class="icon fa-github"><span class="label">Github</span></a></li>
      
      
      <li><a href="mailto:phudson2@gmail.com" class="icon fa-envelope-o"><span class="label">Email</span></a></li>
      
      
      <li><a href="/rss.xml" class="icon fa-rss"><span class="label">Feed</span></a></li>
      
    </ul>
    <ul class="copyright">
      <li>&copy; Patrick Hudson</li><li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
    </ul>
  </footer>

      <!-- Scripts -->
  <script src="/assets/js/jquery.min.js"></script>
  <script src="/assets/js/jquery.poptrox.min.js"></script>
  <script src="/assets/js/skel.min.js"></script>
  <script src="/assets/js/util.js"></script>
  <!--[if lte IE 8]><script src="/assets/js/ie/respond.min.js"></script><![endif]-->
  <script src="/assets/js/main.js"></script>


	</body>
</html>
